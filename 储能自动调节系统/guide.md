# 储能自动调节系统使用指南

## 一、系统启动

### 1.1 启动后端服务

```bash
# 进入后端目录
cd /Users/yangjie/code/antigravity/储能自动调节系统/backend

# 安装依赖（首次运行）
pip3 install -r requirements.txt

# 启动服务
uvicorn app.main:app --reload --port 8000
```

启动成功后会看到：

```
✅ 数据库初始化完成
INFO:     Uvicorn running on http://127.0.0.1:8000
```

### 1.2 启动前端服务

```bash
# 进入前端目录
cd /Users/yangjie/code/antigravity/储能自动调节系统/frontend

# 安装依赖（首次运行）
npm install

# 启动开发服务器
npm run dev
```

启动成功后访问 <http://localhost:5173>

---

## 二、使用方法

### 2.1 输入参数说明

| 参数 | 单位 | 说明 |
|------|------|------|
| 储能当前出力 | MW | 正值=放电，负值=充电 |
| 调度指令值 | MW | AGC下达的发电计划 |
| 光伏出力 | MW | 光伏电站当前发电功率 |
| 当前SOC | % | 储能剩余电量百分比 |
| 充电上限 | MW | 最大充电功率（负值） |
| 放电上限 | MW | 最大放电功率（正值） |
| 死区值 | MW | 偏差小于此值不调节 |
| SOC下限 | % | 低于此值停止放电 |

### 2.2 操作步骤

1. **输入参数**：在左侧表单填写当前运行参数
2. **点击计算**：点击"计算调节策略"按钮
3. **查看结果**：右侧显示计算结果和建议
4. **关注告警**：如有告警信息请特别注意

### 2.3 结果解读

- **特征码**：4位数字，表示当前状态组合
- **调节目标**：建议的储能出力值
- **偏差值**：调度指令与实际总有功的差值
- **条件判断**：限电、死区、充电等级、限值状态

---

## 三、常见场景

### 场景1：放开限电

**输入示例：**

- 储能出力：-12 MW（充电中）
- 调度指令：63 MW
- 光伏出力：73 MW

**输出结果：**

- 总有功：61 MW
- 偏差：+2 MW
- 建议：减少储能充电

### 场景2：在死区内

当偏差值 < 1.2 MW时，系统处于死区，不需要调节。

### 场景3：SOC过低告警

当SOC接近8%时，系统会发出告警，提醒停止放电。

---

## 四、API文档

启动后端后，访问 <http://localhost:8000/docs> 查看完整的Swagger API文档。

---

## 五、注意事项

1. **AGC限制**：当AGC指令低于3MW时，不应进行储能充电
2. **SOC边界**：SOC不得低于8%，接近10%需特别关注
3. **限电判断**：实际出力小于调度指令且超过死区即为限电

---

## 六、故障排除

| 问题 | 解决方案 |
|------|----------|
| 后端启动失败 | 检查Python版本≥3.10，安装依赖 |
| 前端无法访问 | 确认npm install成功，检查端口5173 |
| 计算无响应 | 检查后端是否运行在8000端口 |
| 历史记录丢失 | 数据存储在 backend/data/ 目录 |
