# 数据曲线分析系统 (DataCurve Analysis System) 使用指南

欢迎使用**数据曲线分析系统**。本手册将指导您如何高效地导入数据、配置图表以及利用高级分析工具进行深入探索。

---

## 🚀 1. 快速入门：导入数据

系统支持多种灵活的数据导入方式，方便您快速开始分析。

* **拖拽导入**：直接将您的 `.csv` 或 `.json` 文件拖入页面中心的虚线框区域。
* **粘贴导入**：点击工具栏的“粘贴数据”按钮，将 Excel 或数据库查询结果直接粘贴到弹出框中，系统会自动识别表头。
* **范例参考**：如果您不确定数据格式，可以点击下载页面底部的 `sample_weather.csv` 作为模版。
* *提示：系统能自动识别“日期”、“时间”、“城市”、“功率”等关键词，并自动完成单位转换。*

---

## 📊 2. 图表交互与查看

* **曲线切换**：点击图表中的曲线或数据点，系统会自动将对应的纵坐标轴切换至最左侧显示，方便精准读数。
* **缩放与平移**：使用鼠标滚轮进行图表缩放，按住鼠标左键可水平平移查看不同时刻的数据。
* **图例切换**：点击图表顶部的图例标签，可快速显示或隐藏特定指标。

---

## 🛠 3. 分析控制台（左侧面板）

左侧面板是您的核心控制中心，提供了丰富的分析维度：

### 📅 日期与维度筛选

* **多日对比**：可以在日期列表中勾选多个日期进行同屏对比。
* **多维筛选**：系统会自动提取数据中的所有维度（如“场站”、“设备”等）。您可以直接在侧边栏对多维度进行交叉筛选（全选、全消或逐个勾选），图表将实时根据筛选结果展示聚合后的曲线。

### ⏱ 时间粒度调整

* 点击“时”、“日”、“月”、“年”切换聚合方式。系统会自动计算区间内的均值或积分值（如功率自动转为电量 MWh）。

### 📐 坐标轴与量程设置

* **全局缩放 (0.5x - 1.5x)**：通过顶部的滑动杆，一键等比例拉伸或压缩所有数据的纵向视野。
* **⚡ 功率统一设置**：针对电力业务，点击闪电图标下方的输入框，可一次性锁定所有功率类指标（实际、预测、负荷等）的上下限。
* **个别调节**：支持为每个指标配置独立的颜色，并手动输入最大/最小值进行精准观察。

### 🛑 7. 限电分析 (高级工具)

* **启用限电背景**：勾选“启用限电分析”后，图表会根据**辐照度**、**AGC 指令**和**实际功率**的逻辑判断，用红色背景标记限电时段。
* **参数微调**：您可以实时调整“辐照度阈值”及“差值阈值”，并自定义背景的颜色和透明度。
* **多场站适配**：系统会自动匹配同一时间点下各场站的设备数据，确保多场站对比时背景标记准确。

### 🌍 8. 场站与气象数据获取

* **气象 API 调取**：点击“历史辐照度”，根据场站名称自动从云端获取 15 分钟分辨率的水平面辐照度。
* **场站库管理**：在获取弹窗中点击“配置场站库”，您可以维护场站的经纬度、方位角、倾角等参数。支持通过粘贴 CSV 文本进行批量导入和更新。

---

## 📝 4. 数据精细化管理

在“选中数据详情”列表中，您可以对已加载的每一条序列进行深度操作：

* **手动编辑 (📄 图标)**：
* 点击数据项右侧的文档图标，可弹出编辑框。
* **重命名**：修改“系列显示名称”或“核心指标名称”（修改指标名称会触发坐标轴重新分组）。
* **微调数值**：支持直接修改 JSON 格式的源数据，便于快速调试异常跳变点。
* **总计值预览**：开启“显示总计”后，列表会显示该曲线的累积值（如电量、辐照量 MJ/m² 或平均风速）。

---

## 💾 5. 历史存单与持久化

* **保存快照**：点击顶部的“存入历史”，可将当前屏幕上所有的曲线组合、颜色、量程设置保存为一个快照。
* **搜索与调阅**：在“历史”标签页中，通过关键词搜索快速找回之前的分析方案。即使刷新页面或重启服务，这些数据依然保存在本地数据库中。

---

## ☁️ 6. 导出与日志

* **CSV 导出**：点击侧边栏顶部的“导出 CSV”，系统会根据您当前的筛选维度，生成一份标准的、包含所有计算结果的结构化报表。
* **运行日志**：如系统运行异常，点击顶部的“日志”图标可查看前端访问记录与后端错误日志，方便远程排查问题。

---

*如有更多功能需求或使用疑问，请咨询系统管理员。*
